{"version":3,"file":"makeStyles.js","sourceRoot":"","sources":["../../src/constructors/makeStyles.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  onUnmounted,\n  reactive,\n  ref,\n  watchEffect,\n} from \"vue\";\nimport useTheme from \"../hooks/useTheme\";\nimport { isEmpty } from \"../utils/helper\"\nimport combineCSSAndCreateStyleElement from \"../utils/styled/combineCSSAndCreateStyleElement\";\nimport combinePropsClassNames from \"../utils/styled/combinePropsClassNames\";\nimport deleteCSSAndStyleElement from \"../utils/styled/deleteCSSAndStyleElement\";\nimport getStylesCreator from \"./getStylesCreator/getStylesCreator\";\nimport emptyTheme from \"../constants/emptyTheme\";\nimport type { ObjectType } from \"../types/index.types\";\nimport type { MakeStylesOptions, StyleOrCreator } from \"./types/index.types\"\nimport type { EffectOptions } from \"./types/index.types\";\n\nconst effectClasses = (options: EffectOptions, props: ObjectType = {}) => {\n  const { theme, name,  stylesCreator, classNames, styleEleName } = options\n\n  const styles = stylesCreator.create(theme, props, name);\n\n  if (isEmpty(styles)) {\n    return;\n  }\n\n  const combineCSS = combineCSSAndCreateStyleElement(styles);\n  const css = combineCSS.create(stylesCreator.options)\n  const combineClasses = combinePropsClassNames(\n    css.classes,\n    props.classes\n  );\n\n  styleEleName.value = css.styleEleName;\n\n  for (const key in combineClasses) {\n    classNames[key] = combineClasses[key];\n  }\n};\n\nfunction makeStyles(\n  stylesOrCreator: StyleOrCreator,\n  options: MakeStylesOptions = {}\n) {\n  const {\n    componentName = '',\n    classNamePrefix: classNamePrefixOption,\n    defaultTheme = emptyTheme\n  } = options\n  const stylesCreator = getStylesCreator(stylesOrCreator);\n  const classNamePrefix = classNamePrefixOption || componentName || 'makeStyles';\n  stylesCreator.options = {\n    name: componentName,\n    meta: classNamePrefix,\n    classNamePrefix,\n  }\n\n  const useStyles = (props: object = {}) => {\n    const theme = useTheme() || defaultTheme;\n    stylesCreator.options.unit = theme.themeUnit?.unit ?? 'px'\n    stylesCreator.options.numericalCSS = theme.numericalCSS\n\n    const styleEleName = ref<string | null>(\"\");\n    const classNames = reactive<ObjectType>({});\n\n    watchEffect(() => {\n      const current = {\n        name: componentName,\n        classNamePrefix,\n        theme,\n        stylesCreator,\n        classNames,\n        styleEleName\n      }\n\n      effectClasses(current, props);\n    });\n\n    onUnmounted(() => {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      const combineClassNamesValue = Object.values(classNames);\n      deleteCSSAndStyleElement(\n        `.${combineClassNamesValue?.[0]}`,\n        styleEleName.value\n      );\n    });\n\n    return classNames;\n  };\n\n  return useStyles\n}\n\nexport default makeStyles;\n"]}